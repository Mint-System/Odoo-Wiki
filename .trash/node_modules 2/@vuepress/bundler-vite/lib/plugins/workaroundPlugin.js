"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.workaroundPlugin = void 0;
/**
 * Workaround for https://github.com/vitejs/vite/issues/7621
 */
const workaroundPlugin = () => {
    let server;
    return {
        name: 'vuepress:workaround',
        enforce: 'pre',
        apply: 'serve',
        configureServer(_server) {
            server = _server;
        },
        resolveId() {
            if (server?._optimizedDeps?.metadata.browserHash) {
                server._optimizedDeps.metadata.hash = '';
                server._optimizedDeps.metadata.browserHash = '';
            }
            return null;
        },
    };
};
exports.workaroundPlugin = workaroundPlugin;
