"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.setupAppThemeAndPlugins = void 0;
const resolveThemeInfo_1 = require("./resolveThemeInfo");
/**
 * Setup theme and plugins for vuepress app
 */
const setupAppThemeAndPlugins = (app, config) => {
    // recursively resolve theme info
    const themeInfo = (0, resolveThemeInfo_1.resolveThemeInfo)(app, app.options.theme);
    // set up app layouts and templates
    app.layouts = themeInfo.layouts;
    app.options.templateDev =
        config.templateDev ?? themeInfo.templateDev ?? app.options.templateDev;
    app.options.templateBuild =
        config.templateBuild ?? themeInfo.templateBuild ?? app.options.templateBuild;
    [...themeInfo.plugins, ...app.options.plugins]
        .flat()
        .forEach((plugin) => app.use(plugin));
};
exports.setupAppThemeAndPlugins = setupAppThemeAndPlugins;
