"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createPluginApiRegisterHooks = void 0;
const normalizeClientConfigFileHook_1 = require("./normalizeClientConfigFileHook");
const normalizeReturnObjectHook_1 = require("./normalizeReturnObjectHook");
const createPluginApiRegisterHooks = (plugins, hooks) => () => {
    plugins.forEach(({ name: pluginName, alias, define, clientConfigFile, ...commonHooks }) => {
        /**
         * hooks that need to be normalized
         */
        if (alias) {
            hooks.alias.add({
                pluginName,
                hook: (0, normalizeReturnObjectHook_1.normalizeReturnObjectHook)(alias),
            });
        }
        if (define) {
            hooks.define.add({
                pluginName,
                hook: (0, normalizeReturnObjectHook_1.normalizeReturnObjectHook)(define),
            });
        }
        if (clientConfigFile) {
            hooks.clientConfigFile.add({
                pluginName,
                hook: (0, normalizeClientConfigFileHook_1.normalizeClientConfigFileHook)(clientConfigFile),
            });
        }
        /**
         * common hooks
         */
        Object.entries(commonHooks).forEach(([key, hook]) => {
            if (hooks[key] && hook) {
                hooks[key].add({
                    pluginName,
                    hook,
                });
            }
        });
    });
};
exports.createPluginApiRegisterHooks = createPluginApiRegisterHooks;
